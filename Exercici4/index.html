<!DOCTYPE html>
<html lang="ca">
<head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sant Pere de Vallhonesta</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Macondo&family=Modern+Antiqua&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Unicase&display=swap" rel="stylesheet">
    <link rel="icon" href="imatges/centrelogo.png" type="image/png">
    
    <!-- Carregar Panellum -->
    <script type="text/javascript" src="https://cdn.pannellum.org/2.5/pannellum.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.pannellum.org/2.5/pannellum.css" />
    
</head>

<body>
    <!-- Menú fix a la part superior -->
    <nav class="navbar">
        <div class="navbar-logo">
            <a href="https://cesvcastellet.wixsite.com/index" target="_blank" rel="noopener noreferrer" class="logo-link">
                <img src="imatges/centrelogo.png" alt="Logo" class="logo-icon">
            </a>
        </div>
        <ul class="navbar-menu">
            <li><a href="#fotos">Fotos</a></li>
            <li><a href="#historia">Història</a></li>
            <li><a href="#videos">3D</a></li>
            <li><a href="#com-arribar">Mapa</a></li>
            <li><a href="#enllacos">Enllaços</a></li>
        </ul>
        <div class="navbar-logo">
            <a href="https://www.svc.cat/" target="_blank" rel="noopener noreferrer" class="logo-link">
                <img src="imatges/ajuntament1.jpeg" alt="Logo" class="logo-icon">
            </a>
        </div>
    </nav>
    <div class="header">
        <h1>Sant Pere de <br> Vallhonesta</h1>
    </div>

    <!-- Secció de Fotos -->
    <section id="fotos" class="section">
        
        <div class="photo-gallery">
            <div class="photo"><img src="imatges/exterior3.jpg" alt="Foto 1" onclick="openModal(this)"></div>
            <div class="photo"><img src="imatges/exterior4.jpg" alt="Foto 2" onclick="openModal(this)"></div>
            <div class="photo"><img src="imatges/interior3.jpg" alt="Foto 3" onclick="openModal(this)"></div>
            <div class="photo"><img src="imatges/interior4.jpg" alt="Foto 4" onclick="openModal(this)"></div>
            <div class="photo"><img src="imatges/exterior1.jpg" alt="Foto 5" onclick="openModal(this)"></div>
            <div class="photo"><img src="imatges/exterior5.jpg" alt="Foto 6" onclick="openModal(this)"></div>
            <div class="photo"><img src="imatges/interior6.jpg" alt="Foto 7" onclick="openModal(this)"></div>
            <div class="photo"><img src="imatges/interior2.jpg" alt="Foto 8" onclick="openModal(this)"></div>
        </div>
        
    
        <!-- Modal per mostrar la imatge gran -->
        <div id="imageModal" class="modal">
            <span class="close" onclick="closeModal()">&times;</span>
            <img id="modalImage" src="" alt="Imatge gran">
        </div>
        <script type="text/javascript">
        // Funció per obrir el modal amb la imatge seleccionada
function openModal(imgElement) {
    var modal = document.getElementById("imageModal");
    var modalImg = document.getElementById("modalImage");
    modal.style.display = "flex"; // Fa visible el modal
    modalImg.src = imgElement.src; // Assigna la imatge a mostrar
}

// Funció per tancar el modal
function closeModal() {
    var modal = document.getElementById("imageModal");
    modal.style.display = "none"; // Amaga el modal
}
</script>
    </section>
    <!-- Secció d'Història -->
    <section id="historia" class="section">
        <div class="llibrefons">
           
            <img src="imatges/llibre.png" alt="Llibre">
            
            <h2 class="macondo-regular">Història</h2>
            <p>L'Ermita de Sant Pere de Vallhonesta és una petita església romànica que es troba a Sant Vicenç de Castellet, al Bages, just al vessant sud de la vall del torrent de Rubió. És un racó encantador que domina una zona plena d’història, envoltada de natura i amb vistes magnífiques.

            Aquesta ermita té els seus orígens al segle XI, quan feia de parròquia per als masos de Vallhonesta. La zona ja apareix documentada el 1115, amb els Guàrdia de Montserrat com a senyors feudals. Més endavant, al segle XIV, després de la devastadora pesta negra, va perdre el seu paper parroquial i va quedar com a sufragània de Sant Vicenç de Castellbell. Finalment, al segle XIX, va passar a dependre de Sant Vicenç de Castellet.
            
            L’edifici és un clar exemple del romànic català. Té una única nau amb un absis orientat a l’est, seguint la tradició d’aquella època. L’absis està decorat amb arcs llombards cecs i una finestra central d’arc de mig punt que li dona un toc especial. A la part de ponent, hi trobem el campanar d’espadanya, amb quatre obertures estilitzades que criden l’atenció. A dins, encara es conserva un sarcòfag de pedra d’època romànica.
            
            L’entorn de l’ermita és tranquil i convida a gaudir de la natura. De fet, Vallhonesta és una de les portes d’entrada al Parc Natural de Sant Llorenç del Munt i l’Obac, cosa que fa que sigui un punt de pas interessant per als amants del senderisme i de la història.
            
            Per arribar-hi, només cal agafar el camí de Vallhonesta des de Sant Vicenç de Castellet, una ruta senzilla que regala unes vistes espectaculars. A prop, també es pot visitar l’ermita de Sant Jaume de Vallhonesta i les restes de l’antic hostal de Sant Jaume.
            
            En definitiva, l’Ermita de Sant Pere de Vallhonesta és un petit tresor medieval que ens connecta amb el passat i ens permet gaudir d’un entorn natural que, tot i el pas dels segles, conserva la seva essència autèntica.</p>
        </div>
    </section>

    <!-- Secció de Vídeos 3D (foto 360 interactiva) -->
    <section id="videos" class="section">
        <h2>3D Interactiu</h2>
    
        <!-- Contenidor per a les imatges 360 en miniatura -->
        <div class="panorama-gallery">
            <div class="panorama-item" ondblclick="handleDoubleClick(event, 'imatges/3d1.jpg')" onmousedown="startDrag(event, 'imatges/3d1.jpg')">
                <img src="imatges/3d1.jpg" alt="Panorama 1" class="panorama-thumbnail">
            </div>
            
            <div class="panorama-item" ondblclick="openPanorama('imatges/3d2.jpg')" onmousedown="startDrag(event, 'imatges/3d2.jpg')">
                <img src="imatges/3d2.jpg" alt="Panorama 2" class="panorama-thumbnail">
            </div>
            <div class="panorama-item" ondblclick="openPanorama('imatges/3d3.jpg')" onmousedown="startDrag(event, 'imatges/3d3.jpg')">
                <img src="imatges/3d3.jpg" alt="Panorama 3" class="panorama-thumbnail">
            </div>
            <div class="panorama-item" ondblclick="openPanorama('imatges/3d4.jpg')" onmousedown="startDrag(event, 'imatges/3d4.jpg')">
                <img src="imatges/3d4.jpg" alt="Panorama 4" class="panorama-thumbnail">
            </div>
        </div>
    
        <!-- Modal per mostrar la imatge panoràmica -->
        <div id="panoramaModal" class="modal">
            <span class="close" onclick="closeModalPan()">&times;</span>
            <div id="panoramaViewer" style="width: 100%; height: 500px;"></div>
        </div>
    </section>
    
    <script type="text/javascript">
        var isDragging = false; // Estableix si el ratolí està sent arrossegat
var viewer;

// Funció per obrir la vista panoràmica en un modal
function openPanorama(imageSrc) {
    document.getElementById('panoramaModal').style.display = 'block';
    viewer = pannellum.viewer('panoramaViewer', {
        "type": "equirectangular",
        "panorama": imageSrc,
        "autoLoad": true,
        "showControls": false, // Opcional: elimina controls
        "dragMode": "drag" // Mode de moviment activat
    });
}

// Funció per iniciar el moviment de la imatge en mode "drag"
function startDrag(event, imageSrc) {
    event.preventDefault();  // Evita comportaments per defecte del navegador
    viewer = pannellum.viewer('panoramaViewer', {
        "type": "equirectangular",
        "panorama": imageSrc,
        "autoLoad": true,
        "showControls": false,
        "dragMode": "drag", // Activa el mode "moure"
        "hotSpots": []
    });

    isDragging = true; // Inicia el mode de moviment
}

// Funció per moure la imatge quan el ratolí es desplaça
function onMouseMove(event) {
    if (isDragging) {
        // Utilitzar el moviment del ratolí per moure la imatge 360º
        viewer.mouseMove(event.clientX, event.clientY);
    }
}

// Funció per aturar el moviment quan es deixa anar el botó del ratolí
function stopDrag() {
    isDragging = false; // Atura el moviment
    document.removeEventListener("mousemove", onMouseMove); // Elimina l'esdeveniment "mousemove"
    document.removeEventListener("mouseup", stopDrag); // Elimina l'esdeveniment "mouseup"
}

// Funció per detectar el doble clic i obrir el modal
function handleDoubleClick(event, imageSrc) {
    openPanorama(imageSrc); // Obre el modal només si és un doble clic
}

// Funció per tancar el modal de la vista panoràmica
function closePanoramaModal() {
    var panoramaModal = document.getElementById('panoramaModal');
    panoramaModal.style.display = "none";
    document.getElementById('panoramaViewer').innerHTML = ''; // Neteja el contingut del visor
}

    </script>
    
    
    
    

    <!-- Secció Com Arribar-hi -->
    <section id="com-arribar" class="section">
        <h2>Mapa</h2>
        <div class="map-container">
            <!-- Mapa de l'ermita de Sant Pere de Vallhonesta dins un iframe -->
            <iframe src="https://www.google.com/maps?q=Ermita+de+Sant+Pere+de+Vallhonesta&output=embed" width="600" height="300" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
            
            <!-- Enllaç per obrir Google Maps amb la ruta des de la ubicació actual -->
            <p>
                <button onclick="obrirRuta()">Obre la ruta des de la teva ubicació</button>
            </p>
            <p id="error-message" style="color:red; display:none;">Per generar la ruta, cal que permetis l'accés a la teva ubicació. Si us plau, activa la geolocalització al teu navegador.</p>
        </div>
    </section>
    
    <script>
        function obrirRuta() {
            // Obtenir la localització de l'usuari
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function(position) {
                    var lat = position.coords.latitude;
                    var lon = position.coords.longitude;
                    
                    // Crear la URL de Google Maps amb la ruta des de la ubicació de l'usuari fins a l'ermita
                    var url = `https://www.google.com/maps/dir/?api=1&origin=${lat},${lon}&destination=Ermita+de+Sant+Pere+de+Vallhonesta`;
                    // Obre la finestra nova amb la ruta
                    window.open(url, '_blank');
                }, function(error) {
                    // Mostrar missatge d'error si no es pot obtenir la ubicació
                    document.getElementById("error-message").style.display = "block";
                });
            } else {
                alert("La geolocalització no està suportada pel teu navegador.");
            }
        }
    </script>

<section id="enllacos" class="section">
    <h2>Enllaços recomanats</h2>
    <ul>
        <li><a href="https://ca.wikiloc.com/rutes-senderisme/sant-pere-i-sant-jaume-de-vallhonesta-i-el-puigsoler-100-cims-des-de-sant-vicenc-de-castellet-12909800" target="_blank">Ruta senderisme</a></li>
        <li><a href="https://www.youtube.com/watch?v=0fozzxFXRac" target="_blank">Video 3D</a></li>
        <li><a href="https://www.svc.cat/municipi/patrimoni/patrimoni-arquitectonic/sant-pere-de-vallhonesta/?turisme=" target="_blank">Ajuntament de Sant Vicenç de Castellet</a></li>
        <li><a href="https://www.catalunyamedieval.es/esglesia-de-sant-pere-de-vallhonesta-sant-vicenc-de-castellet-bages/" target="_blank">Catalunya medieval</a></li>
        <li><a href="https://bagesturisme.cat/activitat/ruta-de-vallhonesta/" target="_blank">Bages turisme</a></li>
        <li><a href="https://www.youtube.com/watch?v=jetObyJFvzE" target="_blank">Vistes aèries</a></li>
    </ul>
</section>
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-text">
                <h6>Agraïments especials:</h6>
                <h6>Professor Sergi Gotarra i el seu grup d'alumnes</h6>
                <h6>IES Castellet</h6>
                <h6>Ajuntament de Sant Vicenç de Castellet</h6>
            </div>
            <div class="footer-images">
                <!-- Primera imatge sense fons blanc -->
                <a href="https://cesvcastellet.wixsite.com/index" target="_blank" rel="noopener noreferrer">
                    <img src="imatges/centrelogo.png" alt="Logo 1" class="footer-logo footer-logo-primer">
                </a>
            
                <!-- Segona imatge sense fons blanc -->
                <a href="https://inscastellet.cat/" target="_blank" rel="noopener noreferrer">
                    <img src="imatges/Inscastellet.png" alt="Logo 2" class="footer-logo">
                </a>
            
                <!-- Tercera imatge amb fons blanc -->
                <a href="https://www.svc.cat/" target="_blank" rel="noopener noreferrer">
                    <img src="imatges/logo_ajuntament.png" alt="Logo 3" class="footer-logo white-background">
                </a>
            </div>
            
            
            
    </footer>
    

    </footer>
</body>
</html>
